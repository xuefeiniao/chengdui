<style>
    .search .form-control{
        display:inline-block;
        width:171px;
    }
    .search select.form-control{
        height:31px!important;
        line-height: 31px!important;
        padding:0 15px!important;
    }
    .search>div{
        padding:0;
    }
    .search label{
        margin-right:8px;
    }
    /*表格背景色*/
    .table-striped tbody tr:nth-of-type(even){
        background-color: #f6f6f9;
    }
    .table-striped tbody tr:nth-of-type(odd){
        background-color: #fff;
    }

</style>
<section class="section">
	<div class="row">
		<div class="col-lg-12">
			<div class="card">
				<div class="card-header">
					<h4>登录记录</h4>
				</div>
				<div class="card-body">
				     <!--搜索条件-->
    			    <div class="row search" style="margin-bottom:20px;padding:0 10px 0 15px;">
                       <div class="col-sm-12 col-md-3">
                            <label>商户ID：
                                <input type="text" class="form-control form-control-sm" id="id" name="id" value="{$search->id}"/>
                            </label>
                            <label>商户名：
                                 <input type="text" class="form-control form-control-sm" id="nickname" name="nickname" value="{$search->nickname}"/>
							</label>
                       </div>
                        
                        <div class="col-sm-12 col-md-3">
                           <label>IP地址：
                               <input type="text" class="form-control form-control-sm" id="ip" name="ip" value="{$search->ip}" />
                           </label>
                           <label>登录地：
                               <input type="text" class="form-control form-control-sm" id="ipAddress" name="ipAddress" value="{$search->ipAddress}" />
    						</label>
                        </div>
                        
                       <div class="col-sm-12 col-md-3">
                           <label>开始日期：
                               <input type="text" class="form-control form-control-sm" id="startDate" name="startDate" value="{$search->startDate}" />
                           </label>
                           <label>结束日期：
                               <input type="text" class="form-control form-control-sm" id="endDate" name="endDate" value="{$search->endDate}" />
                            </label>
                       </div>
                        <div class="col-sm-12 col-md-3 text-right">
                          <button class="btn btn-primary" id="search" >搜索</button>                        
                       </div>
                    </div>
                     
					<div class="table-responsive">
					<table id="example" class="table table-striped table-bordered border-t0 text-nowrap w-100" >
						<thead>
							<tr>
								<th class="wd-15p">商户ID</th>
								<th class="wd-15p">商户名</th>
								<th class="wd-20p">登录时间</th>
								<th class="wd-15p">IP地址</th>
								<th class="wd-10p">登录地点</th>								
<!--								<th class="wd-25p">操作</th>-->
							</tr>
						</thead>
						<tbody>
							{if count($list) != 0}
								{foreach $list as $val}
								<tr>
									<td>{$val.id}</td>
									<td>{$val.username}</td>
									<td>{$val.createtime}</td>
									<td>{$val.ip}</td>
									<td>{$val.location}</td>
<!--									<td><a class="btn btn-action btn-primary" onclick="delLog({$val.id})">删除</a></td>-->
								</tr>
								{/foreach}
							{else/}
								<tr>
									<td style="text-align: center;font-size:1.1em;letter-spacing:.2em;" colspan="6">没有数据</td>
								</tr>
							{/if}
				        </tbody>
					</table>
				</div>
				<!-- 分页 -->
            	<div class="row">
            		<div class="col-sm-12 col-md-5">
            			<div class="dataTables_info" id="example_info" role="status" aria-live="polite">共<span>{$count}</span>条</div>
            		</div>
            		<div class="col-sm-12 col-md-7">
            			<div class="dataTables_paginate paging_simple_numbers text-right" >
            				<ul class="pagination" style="justify-content: flex-end;">
								{$list|raw}
            				</ul>
            			</div>
            		</div>
            	</div>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- Grid Modal -->
<div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="exampleModal2" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="example-Modal2">订单详情</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-6">
						<p>
						    <span>订单号：</span>
						    <span>12233343333</span>
						</p>
					</div>
					<div class="col-md-6">
						<p>
						    <span>流水号：</span>
						    <span>12233343333</span>
						</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<p>
						    <span>时间：</span>
						    <span>2019-03-21 21:12:32</span>
						</p>
					</div>
					<div class="col-md-6">
						<p>
						    <span>用户ID：</span>
						    <span>081002</span>
						</p>
					</div>
					<div class="col-md-6">
						<p>
						    <span>用户名：</span>
						    <span>游戏平台</span>
						</p>
					</div>
					<div class="col-md-6">
						<p>
						    <span>币种：</span>
						    <span>BTC</span>
						</p>
					</div>
					<div class="col-md-6">
						<p>
						    <span>金额：</span>
						    <span>123BTC=112USDT</span>
						</p>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-success" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<script>
    // 引用日期插件
    laydate.render({
      elem: '#startDate' //指定元素
    });
     laydate.render({
      elem: '#endDate' //指定元素
    });

 	/*分页*/
	$('.pagination li a').click(function()
	{
		var href = this.href;
		$('.app-content').empty();
		$.ajax({
			type: "GET",
			url: href,
			success: function(data) {
				$('.app-content').append(data);
			}
		});
		return false;
	});

	// 搜索
	$('#search').click(function()
	{
		var id 			= $('#id').val();
		var nickname 	= $('#nickname').val();
		var ip 			= $('#ip').val();
		var ipAddress 	= $('#ipAddress').val();
		var startDate 	= $('#startDate').val();
		var endDate 	= $('#endDate').val();
		$('.app-content').empty();
		$.ajax({
			type: "POST",
			data: {
				id: id,
				nickname: nickname,
				ip: ip,
				ipAddress: ipAddress,
				startDate: startDate,
				endDate: endDate
			},
			url:'{url(admincoin/ShopManage/shopList)}',
			success: function(e) {
				$('.app-content').append(e);
			}
		});
	});

	// 删除登陆记录
	function delLog(id)
    {
		$.ajax({
			type: "GET",
			url: '/admincoin/Shop_manage/logDel/id/'+id,
			success: function(e) {
				if (e.code == 200) {
						layer.msg(e.msg);
						$('.app-content').empty();
						$.ajax({
							type: "GET",
							url: '/admincoin/Shop_manage/shopCheckRecord',
							success: function(data) {
								$('.app-content').append(data);
							}
						});
						return false;	
					}else{
						layer.msg(e.msg)
					}
			}
		});
		return false;
    }
</script>

