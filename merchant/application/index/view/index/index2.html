<style>
    .hd{
        height: 16px;
    }
</style>
<section class="section">
  <div class="row">
    <div class="col-xl-4 col-lg-6 col-sm-6 col-md-12">
      <div class="card">
        <div class="card-body knob-chart">
          <div class="row mb-0">
            <div class="col-4">
              <div class="card-icon d-flex justify-content-center">
                <img src="__IMG__/total.png" alt="总资产">
              </div>
            </div>
            <div class="col-8">
              <div class="dash3 text-center">
                <small class="text-muted mt-0">总资产</small>
                  <h2 class="text-dark mb-0">{$total|number_format=2}</h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-4 col-lg-6 col-sm-6 col-md-12">
      <div class="card">
        <div class="card-body knob-chart">
          <div class="row mb-0">
            <div class="col-4">
              <div class="card-icon d-flex justify-content-center">
                <img src="__IMG__/usdt.png" alt="BTC">
              </div>
            </div>
            <div class="col-8">
              <div class="dash3 text-center">
                  <small class="text-muted mt-0">USDT(数量)</small>
                  <h2 class="text-dark mb-0">{$usdt_total|number_format=2}</h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
      <div class="col-xl-4 col-lg-6 col-sm-6 col-md-12">
          <div class="card">
              <div class="card-body knob-chart">
                  <div class="row mb-0">
                      <div class="col-4">
                          <div class="card-icon d-flex justify-content-center">
                              <img src="__IMG__/total.png" alt="总资产">
                          </div>
                      </div>
                      <div class="col-8">
                          <div class="dash3 text-center">
                              <small class="text-muted mt-0">总提现</small>
                              <h2 class="text-dark mb-0">￥{$tixm|round=2}</h2>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>


  <!---<div class="row">
<div class="col-lg-12 col-sm-12">
<div class="card">
<div class="card-header">
<h4>收入统计</h4>
</div>
<div class="card-body">
<div id="barchart" class="overflow-hidden"></div>
</div>
</div>
</div>
</div>-->

  <div class="row">
    <div class="col-lg-12 col-sm-12">
      <div class="card">
        <div class="card-header">
          <h4>中币行情</h4>
        </div>
        <div class="card-body" style="padding-top: 20px;">
          <div class="table-responsive">
            <table id="hangqing" class="table table-striped table-bordered border-t0 text-nowrap w-100" >
              <thead>
                <tr>
                  <th class="wd-15p text-center">交易对</th>
                  <th class="wd-15p">最新价</th>
                  <th class="wd-20p">涨幅</th>
                  <th class="wd-15p">最高价</th>
                  <th class="wd-10p">最低价</th>
                  <th class="wd-25p">卖一价</th>
                  <th class="wd-25p">24H成交量</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span>
                      <img src="__IMG__/btcSmall.png" alt="">
                      <i>BTC/USDT</i>
                    </span>
                  </td>
                  <td>
                    <span class="wrap price">
                      <b class="close btcLast">4012.06</b>
                      <em class="estimated btcLastMoney">≈ ¥27282.00</em>
                    </span>
                  </td>
                  <td>
                    <span>
                      <b class="rate up btcRate">+0.45%</b>
                    </span>
                  </td>
                  <td>
                    <span class="wrap high">
                      <b class="close btcHigh">4020.00</b>
                      <em class="estimated btcHighMoney">≈ ¥27336.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="wrap low">
                      <b class="close btcLow">3980.00</b>
                      <em class="estimated btcLowMoeny">≈ ¥27064.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="amount btcSell">16,860</span>
                  </td>
                  <td>
                    <span class="vol btcVol"> 457,818,187</span>
                  </td>
                </tr>
                <tr>
                  <td>
                    <span>
                      <img src="__IMG__/ethSmall.png" alt="">
                      <i>ETH/USDT</i>
                    </span>
                  </td>
                  <td>
                    <span class="wrap price">
                      <b class="close ethLast">4012.06</b>
                      <em class="estimated ethLastMoney">≈ ¥27282.00</em>
                    </span>
                  </td>
                  <td>
                    <span>
                      <b class="rate up ethRate">+0.45%</b>
                    </span>
                  </td>
                  <td>
                    <span class="wrap high">
                      <b class="close ethHigh">4020.00</b>
                      <em class="estimated ethHighMoney">≈ ¥27336.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="wrap low">
                      <b class="close ethLow">3980.00</b>
                      <em class="estimated ethLowMoney">≈ ¥27064.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="amount ethSell">16,860</span>
                  </td>
                  <td>
                    <span class="vol ethVol"> 457,818,187</span>
                  </td>
                </tr>

                <tr>
                  <td>
                    <span>
                      <img src="__IMG__/eosSmall.png" alt="">
                      <i>EOS/USDT</i>
                    </span>
                  </td>
                  <td>
                    <span class="wrap price">
                      <b class="close eosLast">4012.06</b>
                      <em class="estimated eosLastMoney">≈ ¥27282.00</em>
                    </span>
                  </td>
                  <td>
                    <span>
                      <b class="rate down eosRate">+0.45%</b>
                    </span>
                  </td>
                  <td>
                    <span class="wrap high">
                      <b class="close eosHigh">4020.00</b>
                      <em class="estimated eosHighMoney">≈ ¥27336.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="wrap low">
                      <b class="close eosLow">3980.00</b>
                      <em class="estimated eosLowMoney">≈ ¥27064.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="amount eosSell">16,860</span>
                  </td>
                  <td>
                    <span class="vol eosVol"> 457,818,187</span>
                  </td>
                </tr>	
                <tr>
                  <td>
                    <span>
                      <img src="__IMG__/xrpSmall.png" alt="">
                      <i>XRP/USDT</i>
                    </span>
                  </td>
                  <td>
                    <span class="wrap price">
                      <b class="close xrpLast">4012.06</b>
                      <em class="estimated xrpLastMoney">≈ ¥27282.00</em>
                    </span>
                  </td>
                  <td>
                    <span>
                      <b class="rate down xrpRate">+0.45%</b>
                    </span>
                  </td>
                  <td>
                    <span class="wrap high">
                      <b class="close xrpHigh">4020.00</b>
                      <em class="estimated xrpHighMoney">≈ ¥27336.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="wrap low">
                      <b class="close xrpLow">3980.00</b>
                      <em class="estimated xrpLowMoney">≈ ¥27064.00</em>
                    </span>
                  </td>
                  <td>
                    <span class="amount xrpSell">16,860</span>
                  </td>
                  <td>
                    <span class="vol xrpVol"> 457,818,187</span>
                  </td>
                </tr> 
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">

      <div class="col-lg-7 col-md-12 col-12 col-sm-12">
          <div class="card">
              <div class="card-header">
                  <h4>盘口订单统计</h4>
              </div>
              <div class="hd"></div>
              <div class="card-body">
                  <div id="line-chart" class="overflow-hidden"></div>
              </div>
              <div class="hd"></div>
          </div>
      </div>
      <div class="col-lg-5 col-md-12 col-12 col-sm-12">
          <div class="card">
              <div class="card-header">
                  <h4>系统公告</h4>
              </div>
              <div class="card-body">
                  <ul class="visitor list-unstyled list-unstyled-border">
                      {foreach $notice as $vo}
                      <li class="media" href="{:url('article/detail',['id'=>$vo['id']])}" style="cursor:pointer">
                          <img class="mr-3" width="50" {if empty($vo["image"])!="true"}src="{$vo.image}"{else /}src="__IMG__/news/img01.jpg"{/if}>
                          <div class="media-body">
                              <div class="float-right"><small>{$vo.createtime}</small></div>
                              <div class="media-title">{$vo.title}</div>
                              <small>{$vo.content}</small>
                          </div>
                      </li>
                      {/foreach}
                  </ul>
              </div>
          </div>
      </div>
  </div>

</section>

<!-- 图表需要引用的js文件 -->
<script src="__PLU__/morris/morris.min.js"></script>
<script src="__PLU__/morris/raphael.min.js"></script>
<script src="__JS__/dashboard3.js"></script>

		
<script>
    // 点击公告
    $(".media").on('click', function(e) {
        $('.app-content').empty();
        var url=$(this).attr("href");
        $.ajax({
            type: "GET",
            cache:false,
            async:false,
            url: httpHead+url,
            success: function(data) {
                $('.app-content').append(data).attr("data-type","3");
            }
        });
        return false;
    });
</script>
<script>
            $(document).ready(function(){
                var ws=new WebSocket("wss://api.zb.cn/websocket");
				var arrCoin=['btc','eth','eos','xrp']
				var pushCoin=[];
				for(var i=0;i<arrCoin.length;i++){
					pushCoin[i]=arrCoin[i]+"usdt_ticker";
				}
				
				var sendData=[];
				for(var j=0;j<pushCoin.length;j++){
					sendData[j]={
					    'event':'addChannel',
					    'channel':pushCoin[j],
					};	
				}
							
				 ws.onopen=function()
				 {
					for(var k=0;k<sendData.length;k++){
						 var kdata=sendData[k]					 
						 ws.send(JSON.stringify(kdata));	
					}
				 };
				  ws.onmessage=function(evt)
				  {	 		
					var received_msg = JSON.parse(evt.data);
                      if(received_msg.channel=="btcusdt_ticker"){
                          $(".btcLast").html(received_msg.ticker.last);
                          $(".btcLastMoney").html(qian+(received_msg.ticker.last*rmb).toFixed(2));
                          $(".btcHigh").html(received_msg.ticker.high);
                          $(".btcHighMoney").html(qian+(received_msg.ticker.high*rmb).toFixed(2));
                          $(".btcLow").html(received_msg.ticker.low);
                          $(".btcLowMoeny").html(qian+(received_msg.ticker.low*rmb).toFixed(2));
                          $(".btcSell").html("$"+received_msg.ticker.sell);
                          $(".btcVol").html(received_msg.ticker.vol);
                      }else if(received_msg.channel=="ethusdt_ticker"){
                          $(".ethLast").html(received_msg.ticker.last);
                          $(".ethLastMoney").html(qian+(received_msg.ticker.last*rmb).toFixed(2));
                          $(".ethHigh").html(received_msg.ticker.high);
                          $(".ethHighMoney").html(qian+(received_msg.ticker.high*rmb).toFixed(2));
                          $(".ethLow").html(received_msg.ticker.low);
                          $(".ethLowMoney").html(qian+(received_msg.ticker.low*rmb).toFixed(2));
                          $(".ethSell").html("$"+received_msg.ticker.sell);
                          $(".ethVol").html(received_msg.ticker.vol);
                      }else if(received_msg.channel=="eosusdt_ticker"){
                          $(".eosLast").html(received_msg.ticker.last);
                          $(".eosLastMoney").html(qian+(received_msg.ticker.last*rmb).toFixed(2));
                          $(".eosHigh").html(received_msg.ticker.high);
                          $(".eosHighMoney").html(qian+(received_msg.ticker.high*rmb).toFixed(2));
                          $(".eosLow").html(received_msg.ticker.low);
                          $(".eosLowMoney").html(qian+(received_msg.ticker.low*rmb).toFixed(2));
                          $(".eosSell").html("$"+received_msg.ticker.sell);
                          $(".eosVol").html(received_msg.ticker.vol);
                      }else if(received_msg.channel=="xrpusdt_ticker"){
                          $(".xrpLastMoney").html(qian+(received_msg.ticker.last*rmb).toFixed(2));
                          $(".xrpLast").html(received_msg.ticker.last);
                          $(".xrpHigh").html(received_msg.ticker.high);
                          $(".xrpHighMoney").html(qian+(received_msg.ticker.high*rmb).toFixed(2));
                          $(".xrpLow").html(received_msg.ticker.low);
                          $(".xrpLowMoney").html(qian+(received_msg.ticker.low*rmb).toFixed(2));
                          $(".xrpSell").html("$"+received_msg.ticker.sell);
                          $(".xrpVol").html(received_msg.ticker.vol);
                      }
				  }
            })
</script>